<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<head th:replace="_fragments :: header(~{::title})">
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/semantic-ui/2.2.10/semantic.min.css">
		<link rel="stylesheet" type="text/css" href="../static/css/my.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/typo.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css" />
		<link rel="stylesheet" type="text/css" href="../static/lib/prism/prism.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css">
		<title>博客详情</title>
	</head>

	<body>
		<!--导航-->
		<nav class="ui inverted attached segment m-padded-tb-mini" th:replace="_fragments::nav(0)">
			<div class="ui container">
				<div class="ui inverted secondary stackable menu">
					<h2 class="ui teal header item">GodHrh-Blog</h2>
					<a href="#" class="item m-mobile-hidden"><i class="home icon"></i>首页</a>
					<a href="#" class="m-item item m-mobile-hidden"><i class="idea icon"></i>分类</a>
					<a href="#" class="m-item item m-mobile-hidden"><i class="tags icon"></i>标签</a>
					<a href="#" class="m-item item m-mobile-hidden"><i class="copy icon"></i>归档</a>
					<a href="#" class="m-item item m-mobile-hidden"><i class="info icon"></i>关于我</a>
					<div class="m-item right item m-mobile-hidden">
						<div class="ui icon inverted transparent input">
							<input type="text" name="" id="" value="" placeholder="Search..." />
							<i class="search link icon"></i>
						</div>
					</div>
				</div>
			</div>
			<a href="#" class="ui black icon button m-right-top m-mobile-show" id="sidebar">
				<i class="sidebar icon"></i>
			</a>
		</nav>

		<!--中间内容-->
		<div class="m-contain m-padded-tb-large animate__animated animate__flip">
			<div class="ui container typo typo-selection">
				<div class="ui top attached segment">
					<!--头部-->
					<div class="ui horizontal link list">
						<div class="item">
							<img src="../static/images/heardImg.jpg" alt="" class="ui avatar image" th:src="@{${blog.user.avatar}}"/>

							<div class="content">
								<div class="header" th:text="${blog.user.nickname}">贺先森</div>
							</div>

						</div>
						<div class="item">
							<i class="calendar icon"></i><span th:text="${#dates.format(blog.updateTime,'yyyy-MM-dd')}">2020-05-20</span>
						</div>
						<div class="item">
							<i class="eye icon"></i><span th:text="${blog.views}">1314</span>
						</div>
					</div>
				</div>
				<div class="ui attached segment">
					<!--图片区域-->
					<img src="../static/images/nature1.jpg" alt="" class="ui fluid roudend image"  th:src="@{${blog.firstPicture}}" />
				</div>
				<div class="ui attached padded segment js-toc-content">
					<!--内容-->
					<div class="ui right aligned basic segment ">
						<div class="ui orange label basic" th:text="${blog.flag}">原创</div>
					</div>
					<h1 class="ui center aligned header" id="title" th:text="${blog.title}">一个男生该有哪些优秀习惯？</h1>
					<br />
					<div id="content" class="m-padded-tb-large m-padded-lr-response" th:utext="${blog.content}">
						<h2 id="one">1</h2>
						<p>无论是本职或是业余爱好，有自己的“绝对领域”，在这个领域里可以碾压99.99%的人。并且不在这个领域以外的地方浪费太多时间，成为别人的帮闲和陪衬。</p>
						<h2 id="two">2</h2>
						<p>说话不必太多，但说出来务必句句有分量，任何事只要说出来就意味着一定会做到，做到才是最重要的。</p>
						<h2 id="three">3</h2>
						<p>靠自己过硬的人品和实力，去赢得别人的尊重、信任和青睐，而不是靠献媚和各种手段去取悦别人。</p>
						<h2 id="four">4</h2>
						<p>不用在乎别人给你贴什么标签，也不用在乎别人拿什么标准套你，尤其是什么“连体重都管理不好怎么管理自己的人生”这种有毒营销。因为你有“绝对领域”，你自身就是一种标准。</p>
						<h2 id="five">5</h2>
						<p>“放心，有我在。”对得起别人的托付，在朋友、家人和爱人在需要你的时候，你总是会第一时间出现，助他们度过难关。</p>
						<h2 id="six">6</h2>
						<p>对待别人宽容一些，你有知识，就要包容别人的无知，你有财富，就要体谅别人因物质条件的匮乏而形成的局限，就像《了不起的盖茨比》里说的：All the people in this world haven&#39;t had the advantages that you&#39;ve had.</p>
						<h2 id="seven">7</h2>
						<p>多去一些地方，去“旅行”而不是“旅游”，这不是为了打卡签到拍照发朋友圈，而是为了见到更多的人和事物，领略不同的文化、价值观和生活方式，胸有丘壑，眼存山河。</p>
						<h2 id="eight">8</h2>
						<p>碰壁了，失败了，自己总结，重整旗鼓，再接再厉。不要怨天尤人，唉声叹气，不要抱怨不公平，世界本来就是不公平的，你一直强调这一点，只能说明你自己的幼稚。</p>
						<h2 id="nine">9</h2>
						<p>有几个靠谱的朋友，可以给你各种启发和激励，无友不如己者，这是一种理想，但是如果你发现朋友圈里都是庸怠之人，恐怕要想想是不是自身出了问题。</p>
						<h2 id="ten">10</h2>
						<p>少刷博客，尤其是看到我这样，貌似每句话都有道理的，不要全都信。人生的真谛要自己去发现，我可能只是个趁着酒劲胡说八道的人。</p>

						<br />
						<!--标签-->
						<div class="m-padded-lr">
							<div class="ui label basic teal left pointing " th:each="tag : ${blog.tags}" th:text="${tag.name}">方法论</div>
						</div>
					</div>

					<!--赞赏-->
					<div class="ui center aligned segment basic" th:if="${blog.appreciation}" >
						<button class="ui orange basic circular button" id="payButton">赞赏</button>
					</div>
					<!--二维码-->
					<div class="ui payQR flowing popup transition hidden " id="payQR">
						<div class="ui orange basic label">
							<div class="ui images" style="font-size: inherit !important;">
								<div class="image ui center aligned segment basic">
									<img src="../static/images/pay-wechar.jpg" alt="" class="ui rounded bordered " style="width: 120px;height: 120px;" th:src="@{/images/pay-wechar.jpg}"/>
									<div>
										Support For Wechat.
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="ui attached positive message  "  th:if="${blog.shareStatement}">
					<!--博客信息-->
					<div class="ui middle aligned grid">
						<div class="eleven wide column ">
							<ul class="list">
								<li>作者：<span th:text="${blog.user.nickname}">贺瑞豪</span><a href="#" th:href="@{/about}" target="_blank">（联系作者）</a></li>
								<li>发表时间：<span th:text="${#dates.format(blog.updateTime,'yyyy-MM-dd HH:mm')}">2017-10-02 09:08</span></li>
								<li>版权声明：自由转载-非商用-非衍生-保持署名（创意共享3.0许可证）</li>
								<li>公众号转载：请在文末添加作者微信二维码</li>
							</ul>
						</div>
						<div class="five wide column ">
							<img src="../static/images/WeChart.jpg" alt="" th:src="@{/images/WeChart.jpg}" class="ui right floated rounded bordered image" style="width: 100px; height: 100px;" />
						</div>
					</div>
				</div>
				<div  class="ui bottom attached segment"  th:if="${blog.commentabled}">
					<!--留言区域-列表-->
					<div id="liuyan" class="ui teal segment">
						<div th:fragment="commentList">
						<div class="ui comments" style="max-width: 100%;">
							<h3 class="ui dividing header">评论</h3>
							<div class="comment" th:each="comment : ${comments}">
								<div class="avatar">
<!--									把自定义头像注释掉-->
									<img src="../static/images/heardImg2.jpg" th:src="@{${comment.avatar}}">
<!--									<i class="user circle icon" style="font-size: 2em;width: 100%;height: 100%;color: #4183C4;"></i>-->
								</div>
								<div class="content">
									<a class="author" >
										<span th:text="${comment.nickName}">Matt</span>
										<div class="ui mini basic teal left pointing label m-padded-mini" th:if="${comment.adminComment}">博主</div>
									</a>
									<div class="metadata">
										<span class="date" th:text="${#dates.format(comment.createTime,'yyyy-MM-dd HH:mm')}">Today at 5:42PM</span>
									</div>
									<div class="text" th:text="${comment.content}">
										How artistic!
									</div>
									<div class="actions">
										<a class="reply" data-commentid="1" data-commentnickname="Matt" th:attr="data-commentid=${comment.id},data-commentnickname=${comment.nickName}" onclick="reply(this)">回复</a>
									</div>
								</div>
<!--								该条评论的子类-->
								<div class="comments" th:if="${#arrays.length(comment.replyComments)}>0">
									<div class="comment" th:each="reply : ${comment.replyComments}">
										<div class="avatar">
											<img src="../static/images/heardImg2.jpg" th:src="@{${comment.avatar}}">
<!--											<i class="user circle icon" style="font-size: 2em;width: 100%;height: 100%;color: #4183C4;"></i>-->
										</div>
										<div class="content">
											<a class="author" >
												<span th:text="${reply.nickName}">小红</span>
												<div class="ui mini basic teal left pointing label m-padded-mini" th:if="${reply.adminComment}">博主</div>&nbsp;
												&nbsp;<span th:text="|@ ${reply.parentComment.nickName}|" class="m-teal">@ 小白</span>
											</a>
											<div class="metadata">
												<span class="date" th:text="${#dates.format(reply.createTime,'yyyy-MM-dd HH:mm')}">Today at 5:42PM</span>
											</div>
											<div class="text" th:text="${reply.content}">
												How artistic!
											</div>
											<div class="actions">
												<a class="reply" data-commentid="1" data-commentnickname="Matt" th:attr="data-commentid=${reply.id},data-commentnickname=${reply.nickName}" onclick="reply(this)">回复</a>
											</div>
										</div>
									</div>
								</div>
							</div>
<!--/*-->
							<div class="comment">
								<a class="avatar">
									<img src="../static/images/heardImg1.png">
								</a>
								<div class="content">
									<a class="author">Elliot Fu</a>
									<div class="metadata">
										<span class="date">Yesterday at 12:30AM</span>
									</div>
									<div class="text">
										<p>This has been very useful for my research. Thanks as well!</p>
									</div>
									<div class="actions">
										<a class="reply">Reply</a>
									</div>
								</div>
								<div class="comments">
									<div class="comment">
										<a class="avatar">
											<img src="../static/images/heardImg2.jpg">
										</a>
										<div class="content">
											<a class="author">Jenny Hess</a>
											<div class="metadata">
												<span class="date">Just now</span>
											</div>
											<div class="text">
												Elliot you are always so right :)
											</div>
											<div class="actions">
												<a class="reply">Reply</a>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="comment">
								<a class="avatar">
									<img src="../static/images/heardImg.jpg">
								</a>
								<div class="content">
									<a class="author">Joe Henderson</a>
									<div class="metadata">
										<span class="date">5 days ago</span>
									</div>
									<div class="text">
										Dude, this is awesome. Thanks so much
									</div>
									<div class="actions">
										<a class="reply">Reply</a>
									</div>
								</div>
							</div>
<!--*/-->
						</div>
						</div>
						</div>

					<!--留言区域-表单-->
					<div id="comment-form" class="ui form">
						<input type="hidden" name="blog.id" th:value="${blog.id}">
						<input type="hidden" name="parentComment.id" value="-1">
						<div class="field">
							<textarea name="content" placeholder="请输入信息。。。"></textarea>
						</div>
						<div class="fields">
							<div class="field m-mibile-wide m-padded-tb-small">
								<div class="ui left icon input">
									<i class="user icon"></i>
									<input type="text" name="nickname" placeholder="昵称" th:value="${session.user!=null} ? ${session.user.nickname}"/>
								</div>
							</div>
							<div class="field m-mibile-wide m-padded-tb-small">
								<div class="ui left icon input">
									<i class="user icon"></i>
									<input type="text" name="email" placeholder="邮箱" th:value="${session.user!=null} ? ${session.user.email}"/>
								</div>
							</div>
							<div class="field m-mibile-wide m-padded-tb-small">
								<button class="ui teal right aligned button m-mibile-wide" id="commentpost-btn" type="button">
									<i class="edit icon"></i>发布
								</button>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
		<!--左下方的悬浮导航-->
		<div class="m-fixed m-right-bottom m-padded-large">
			<div class="ui vertical icon buttons">
				<button type="button" class="ui teal button" id="catalog">目录</button>
				<a href="#liuyan" class="ui teal button">留言</a>
				<button type="button" class="ui button" id="lookbyphone"><i class="weixin icon"></i></button>
				<div id="ToTop-button" class="ui button"><i class="chevron up icon"></i></div>
			</div>
		</div>
		<!--生成的目录区域-->
		<div class="ui catalog flowing popup transition hidden">
			<div class="js-toc" style="width: 200px;">

			</div>
		</div>
		<!--手机阅读微信二维码-->
		<div class="ui lookbyphone flowing popup transition hidden " id="lookforphone">
			<div class="ui icon">手机扫码阅读</div>
			<!--<img src="images/pay-wechar.jpg" alt="" class="ui rounded bordered " style="width: 120px;height: 120px;" />-->
		</div>
		<!--底部-->
		<footer class="ui inverted vertical segment m-padded-tb-massive" th:replace="_fragments::footer">
			<div class="ui center aligned container">
				<div class="ui inverted divided stackable grid">
					<div class="three wide column">
						<div class="ui inverted list link">
							<div class="item">
								<img src="../static/images/pay-wechar.jpg" class="ui rounded image" style="width: 150px;" />
							</div>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui header inverted m-text-spaced m-opacity-mini">最新博客</h4>
						<div class="ui inverted list link">
							<a href="#" class="item">
								用户故事(User story)
							</a>
							<a href="#" class="item">
								用户故事(User story)
							</a>
							<a href="#" class="item">
								用户故事(User story)
							</a>
							<a href="#" class="item">
								用户故事(User story)
							</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui header inverted m-text-spaced m-opacity-mini">联系我</h4>
						<div class="ui inverted list link">
							<a href="#" class="item">
								Email：god666hrh@gmail.com <br /> QQ:2237202251
							</a>
							<a href="#" class="item">
								用户故事(User story)
							</a>
							<a href="#" class="item">
								用户故事(User story)
							</a>
							<a href="#" class="item">
								用户故事(User story)
							</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui header inverted">Heruihao</h4>
						<p class="m-opacity-mini m-text-lined m-text-spaced">
							这是我的个人博客、会分享关于编程、写作，思考相关的任何内容，希望可以给来到这儿的人有所帮助..
						</p>
					</div>
				</div>
				<div class="ui inverted section divider"></div>
				<p class="m-opacity-mini m-text-lined m-text-spaced">
					© Copyright.2020-2021 Designed by Heruihao
				</p>
			</div>

		</footer>


		<script type="text/javascript" src="../static/js/jquery-1.9.1.js"></script>
		<script src="https://cdn.jsdelivr.net/semantic-ui/2.2.10/semantic.min.js"></script>
		<script src="../static/lib/prism/prosm.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
		<script src="../static/lib/qrcode/qrcode.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="//cdn.jsdelivr.net/npm/jquery.scrollto@2.1.2/jquery.scrollTo.min.js"></script>
		<script type="text/javascript" th:inline="javascript">
			//			手机导航栏点击显示
			$("#sidebar").click(function() {
				$('.m-item').toggleClass("m-mobile-hidden");
			});
			//			赞赏二维码
			$("#payButton").popup({
				popup: $("#payQR"),
				on: "click",
				position: "bottom center"
			});
			//			目录显示
			$("#catalog").popup({
				popup: $(".catalog"),
				on: "hover",
				position: "left center"
			});
			//			初始化目录
			tocbot.init({
				// Where to render the table of contents.
				tocSelector: '.js-toc',
				// Where to grab the headings to build the table of contents.
				contentSelector: '.js-toc-content',
				// Which headings to grab inside of the contentSelector element.
				headingSelector: 'h1, h2, h3',
				// For headings inside relative or absolute positioned containers within content.
				hasInnerContainers: true,
			});
			$("#lookbyphone").popup({
				popup: $(".lookbyphone"),
				on: "hover",
				position: "left center"
			});
			//根据地址生成二维码
			//lookforphone是渲染区域的id
			var qrcode = new QRCode("lookforphone", {
				text: window.location.href,
				width: 120,
				height: 120,
				colorDark: "#000000",
				colorLight: "#ffffff",
				correctLevel: QRCode.CorrectLevel.H
			});
			//平滑滚动至顶部
			$("#ToTop-button").click(function(){
				$(window).scrollTo(0,500);
			})
			//评论表单验证
			$('.ui.form').form({
				fields: {
					title: {
						identifier: 'content',
						rules: [{
							type: 'empty',
							prompt: '请输入评论内容'
						}
						]
					},
					content: {
						identifier: 'nickname',
						rules: [{
							type: 'empty',
							prompt: '请输入你的昵称'
						}]
					},
					type: {
						identifier: 'email',
						rules: [{
							type: 'email',
							prompt: '请填写正确的邮箱地址'
						}]
					}
				}
			});
			//第一次页面加载完成的时候就把评论信息展示出来
			$(function () {
				$("#liuyan").load(/*[[@{/comments/{id}(id=${blog.id})}]]*/"comments/3");
			});
			//提交表单前先做判断看是否每个数据都有值
			$('#commentpost-btn').click(function () {
				var boo = $('.ui.form').form('validate form');
				if (boo) {
					console.log('校验成功');
					postData();
				} else {
					console.log('校验失败');
				}
			});
			//提交表单
			function postData() {
				$("#liuyan").load(/*[[@{/comments}]]*/"",{
					"parentComment.id" : $("[name='parentComment.id']").val(),
					"blog.id" : $("[name='blog.id']").val(),
					"nickName": $("[name='nickname']").val(),
					"email"   : $("[name='email']").val(),
					"content" : $("[name='content']").val()
				},function (responseTxt, statusTxt, xhr) {
//        $(window).scrollTo($('#comment-container'),500);
					//提交成功之后清除评论区内容
					clearContent();
				});
			};
			//清除评论信息功能
			function clearContent() {
				$("[name='content']").val('');
				$("[name='parentComment.id']").val(-1);
				$("[name='content']").attr("placeholder", "请输入评论信息...");
			};
			//回复时候的方法
			function reply(obj) {
				var commentId = $(obj).data('commentid');
				var commentNickname = $(obj).data('commentnickname');
				$("[name='content']").attr("placeholder", "@"+commentNickname).focus();
				$("[name='parentComment.id']").val(commentId);
				$(window).scrollTo($('#comment-form'),500);
			}
		</script>
	</body>
</html>